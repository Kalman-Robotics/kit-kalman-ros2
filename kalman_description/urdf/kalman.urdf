<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from uvrobot.urdf.xacro             | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="uvrobot">
  <!-- Posición vertical -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <material name="steel">
    <color rgba="0.70 0.70 0.70 1.0"/>
  </material>
  <!-- Posición vertical -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Posición vertical -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Base footprint (punto de referencia) -->
  <link name="base_footprint"/>
  <!-- Link del chasis cilíndrico -->
  <link name="chassis_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.1596" radius="0.15"/>
      </geometry>
      <material name="steel"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.1596" radius="0.15"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="4.0"/>
      <inertia ixx="0.030990719999999992" ixy="0.0" ixz="0.0" iyy="0.030990719999999992" iyz="0.0" izz="0.045"/>
    </inertial>
  </link>
  <!-- Joint entre base_footprint y chasis -->
  <joint name="base_chassis_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="chassis_link"/>
    <origin rpy="0 0 0" xyz="0 0 0.0798"/>
  </joint>
  <link name="left_wheel">
    <visual>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.00037916666666666676" ixy="0.0" ixz="0.0" iyy="0.00037916666666666676" iyz="0.0" izz="0.0006250000000000001"/>
    </inertial>
  </link>
  <joint name="left_wheel_joint" type="continuous">
    <parent link="chassis_link"/>
    <child link="left_wheel"/>
    <origin rpy="0 0 0" xyz="0 0.125 -0.08"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="right_wheel">
    <visual>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.00037916666666666676" ixy="0.0" ixz="0.0" iyy="0.00037916666666666676" iyz="0.0" izz="0.0006250000000000001"/>
    </inertial>
  </link>
  <joint name="right_wheel_joint" type="continuous">
    <parent link="chassis_link"/>
    <child link="right_wheel"/>
    <origin rpy="0 0 0" xyz="0 -0.125 -0.08"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="caster_wheel">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="9.000000000000002e-06" ixy="0.0" ixz="0.0" iyy="9.000000000000002e-06" iyz="0.0" izz="9.000000000000002e-06"/>
    </inertial>
  </link>
  <joint name="caster_joint" type="fixed">
    <parent link="chassis_link"/>
    <child link="caster_wheel"/>
    <origin rpy="0 0 0" xyz="0.2 0 -0.1"/>
  </joint>
</robot>
<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from uvrobot.urdf.xacro             | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="uvrobot">
  <!-- Incluir archivos XACRO -->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/properties.xacro"/-->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/inertial.xacro"/-->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <material name="steel">
    <color rgba="0.70 0.70 0.70 1.0"/>
  </material>
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/ros2_control.xacro"/.-->
  <!-- Base footprint (punto de referencia) -->
  <link name="base_footprint"/>
  <!-- Link del chasis cilíndrico -->
  <link name="chassis_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.15" radius="0.15"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.15" radius="0.15"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="4.0"/>
      <inertia ixx="0.03" ixy="0.0" ixz="0.0" iyy="0.03" iyz="0.0" izz="0.045"/>
    </inertial>
  </link>
  <!-- Joint entre base_footprint y chasis -->
  <joint name="base_chassis_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="chassis_link"/>
    <!--origin xyz="0 0 0.095" rpy="0 0 0"/-->
    <origin rpy="0 0 0" xyz="0 0 0.075"/>
  </joint>
  <link name="left_wheel">
    <visual>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.00037916666666666676" ixy="0.0" ixz="0.0" iyy="0.00037916666666666676" iyz="0.0" izz="0.0006250000000000001"/>
    </inertial>
  </link>
  <joint name="left_wheel_joint" type="continuous">
    <parent link="chassis_link"/>
    <child link="left_wheel"/>
    <!--origin xyz="-0.05 ${reflect * (wheel_separation/2)} ${wheel_z_offset}" rpy="0 0 0"/-->
    <origin rpy="0 0 0" xyz="-0.00 0.125 -0.08"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="right_wheel">
    <visual>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.00037916666666666676" ixy="0.0" ixz="0.0" iyy="0.00037916666666666676" iyz="0.0" izz="0.0006250000000000001"/>
    </inertial>
  </link>
  <joint name="right_wheel_joint" type="continuous">
    <parent link="chassis_link"/>
    <child link="right_wheel"/>
    <!--origin xyz="-0.05 ${reflect * (wheel_separation/2)} ${wheel_z_offset}" rpy="0 0 0"/-->
    <origin rpy="0 0 0" xyz="-0.00 -0.125 -0.08"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="caster_wheel">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.037"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.037"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="5.4760000000000004e-05" ixy="0.0" ixz="0.0" iyy="5.4760000000000004e-05" iyz="0.0" izz="5.4760000000000004e-05"/>
    </inertial>
  </link>
  <joint name="caster_joint" type="fixed">
    <parent link="chassis_link"/>
    <child link="caster_wheel"/>
    <origin rpy="0 0 0" xyz="0.12 0 -0.095"/>
  </joint>
  <link name="caster_wheel_invisible">
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.037"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="5.4760000000000004e-05" ixy="0.0" ixz="0.0" iyy="5.4760000000000004e-05" iyz="0.0" izz="5.4760000000000004e-05"/>
    </inertial>
  </link>
  <joint name="caster_joint_invisible" type="fixed">
    <parent link="chassis_link"/>
    <child link="caster_wheel_invisible"/>
    <origin rpy="0 0 0" xyz="-0.12 0 -0.095"/>
  </joint>
  <!-- Ros2 control -->
  <ros2_control name="GaseboSystem" type="system">
    <hardware>
      <plugin>gazebo_ros2_control/GazeboSystem</plugin>
      <!--plugin>uvrobot_hardware/UVRobotHardware</plugin-->
    </hardware>
    <joint name="left_wheel_joint">
      <command_interface name="velocity">
        <param name="min">-10</param>
        <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="right_wheel_joint">
      <command_interface name="velocity">
        <param name="min">-10</param>
        <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
  </ros2_control>
  <!-- Plugin ros2 control gazebo -->
  <gazebo>
    <plugin filename="libgazebo_ros2_control.so" name="gazebo_ros2_control">
      <parameters>/home/oem/uvrobot_ws/install/uvrobot_control/share/uvrobot_control/config/diff_drive_controller.yaml</parameters>
      <ros>
        <remapping>uvrobot_diff_base_controller/cmd_vel_unstamped:=cmd_vel</remapping>
        <remapping>uvrobot_diff_base_controller/odom:=odom</remapping>
        <remapping>/tf:=tf</remapping>
      </ros>
    </plugin>
  </gazebo>
  <!-- Friction -->
  <gazebo reference="caster_joint_invisible">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="caster_wheel_invisible">
    <kp>1000.0</kp>
    <kd>1000.0</kd>
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
  </gazebo>
  <gazebo reference="caster_wheel">
    <kp>1000.0</kp>
    <kd>1000.0</kd>
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
  </gazebo>
  <gazebo reference="laser_link">
    <sensor name="lidar_sensor" type="ray">
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <visualize>1</visualize>
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples>
            <resolution>1</resolution>
            <min_angle>-1.570796</min_angle>
            <max_angle>1.570796</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.2</min>
          <max>10.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin filename="libgazebo_ros_ray_sensor.so" name="gazebo_ros_laser">
        <topicName>/scan</topicName>
        <frameName>laser_link</frameName>
        <gaussianNoise>0.01</gaussianNoise>
        <output_type>sensor_msgs/LaserScan</output_type>
        <ros>
          <remapping>/gazebo_ros_laser/out:=/scan</remapping>
        </ros>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="laser_link">
    <plugin filename="libLedPlugin.so" name="light_control1">
      <enable>true</enable>
      <light>
        <id>laser_link/lamp</id>
        <duration>0.5</duration>
        <interval>0.5</interval>
        <enable>true</enable>
      </light>
    </plugin>
  </gazebo>
  <gazebo reference="chassis_link">
    <material>Gazebo/Black</material>
  </gazebo>
  <!-- Marcador frontal (lado positivo X) -->
  <gazebo reference="chassis_link">
    <material back="Gazebo/Black" bottom="Gazebo/Black" front="Gazebo/Red" left="Gazebo/Black" right="Gazebo/Black" top="Gazebo/Black"/>
  </gazebo>
  <gazebo reference="left_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="right_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="caster_wheel">
    <material>Gazebo/Black </material>
  </gazebo>
  <link name="laser_link">
    <visual name="lamp">
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
      <material name="black">
        <color rgba="0.0 0.0 0.0 1.0"/>
        <!-- Color madera -->
      </material>
    </visual>
    <inertial>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <mass value="0.3"/>
      <inertia ixx="0.000125" ixy="0.0" ixz="0.0" iyy="0.000125" iyz="0.0" izz="0.000125"/>
    </inertial>
    <collision>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="base_lidar_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="0.03 0.00 0.10"/>
    <parent link="chassis_link"/>
    <child link="laser_link"/>
  </joint>
</robot>
<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from uvrobot.urdf.xacro             | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="uvrobot">
  <!-- Incluir archivos XACRO -->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/properties.xacro"/-->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/inertial.xacro"/-->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <material name="steel">
    <color rgba="0.70 0.70 0.70 1.0"/>
  </material>
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/ros2_control.xacro"/.-->
  <!-- Base footprint (punto de referencia) -->
  <link name="base_footprint"/>
  <!-- Link del chasis cilíndrico -->
  <link name="chassis_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.15" radius="0.15"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.15" radius="0.15"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="4.0"/>
      <inertia ixx="0.03" ixy="0.0" ixz="0.0" iyy="0.03" iyz="0.0" izz="0.045"/>
    </inertial>
  </link>
  <!-- Joint entre base_footprint y chasis -->
  <joint name="base_chassis_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="chassis_link"/>
    <!--origin xyz="0 0 0.095" rpy="0 0 0"/-->
    <origin rpy="0 0 0" xyz="0 0 0.075"/>
  </joint>
  <link name="left_wheel">
    <visual>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.00037916666666666676" ixy="0.0" ixz="0.0" iyy="0.00037916666666666676" iyz="0.0" izz="0.0006250000000000001"/>
    </inertial>
  </link>
  <joint name="left_wheel_joint" type="continuous">
    <parent link="chassis_link"/>
    <child link="left_wheel"/>
    <!--origin xyz="-0.05 ${reflect * (wheel_separation/2)} ${wheel_z_offset}" rpy="0 0 0"/-->
    <origin rpy="0 0 0" xyz="-0.00 0.125 -0.08"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="right_wheel">
    <visual>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.00037916666666666676" ixy="0.0" ixz="0.0" iyy="0.00037916666666666676" iyz="0.0" izz="0.0006250000000000001"/>
    </inertial>
  </link>
  <joint name="right_wheel_joint" type="continuous">
    <parent link="chassis_link"/>
    <child link="right_wheel"/>
    <!--origin xyz="-0.05 ${reflect * (wheel_separation/2)} ${wheel_z_offset}" rpy="0 0 0"/-->
    <origin rpy="0 0 0" xyz="-0.00 -0.125 -0.08"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="caster_wheel">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.037"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.037"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="5.4760000000000004e-05" ixy="0.0" ixz="0.0" iyy="5.4760000000000004e-05" iyz="0.0" izz="5.4760000000000004e-05"/>
    </inertial>
  </link>
  <joint name="caster_joint" type="fixed">
    <parent link="chassis_link"/>
    <child link="caster_wheel"/>
    <origin rpy="0 0 0" xyz="0.12 0 -0.095"/>
  </joint>
  <link name="caster_wheel_invisible">
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.037"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="5.4760000000000004e-05" ixy="0.0" ixz="0.0" iyy="5.4760000000000004e-05" iyz="0.0" izz="5.4760000000000004e-05"/>
    </inertial>
  </link>
  <joint name="caster_joint_invisible" type="fixed">
    <parent link="chassis_link"/>
    <child link="caster_wheel_invisible"/>
    <origin rpy="0 0 0" xyz="-0.12 0 -0.095"/>
  </joint>
  <!-- Ros2 control -->
  <ros2_control name="GaseboSystem" type="system">
    <hardware>
      <plugin>gazebo_ros2_control/GazeboSystem</plugin>
      <!--plugin>uvrobot_hardware/UVRobotHardware</plugin-->
    </hardware>
    <joint name="left_wheel_joint">
      <command_interface name="velocity">
        <param name="min">-10</param>
        <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="right_wheel_joint">
      <command_interface name="velocity">
        <param name="min">-10</param>
        <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
  </ros2_control>
  <!-- Plugin ros2 control gazebo -->
  <gazebo>
    <plugin filename="libgazebo_ros2_control.so" name="gazebo_ros2_control">
      <parameters>/home/oem/uvrobot_ws/install/uvrobot_control/share/uvrobot_control/config/diff_drive_controller.yaml</parameters>
      <ros>
        <remapping>uvrobot_diff_base_controller/cmd_vel_unstamped:=cmd_vel</remapping>
        <remapping>uvrobot_diff_base_controller/odom:=odom</remapping>
        <remapping>/tf:=tf</remapping>
      </ros>
    </plugin>
  </gazebo>
  <!-- Friction -->
  <gazebo reference="caster_joint_invisible">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="caster_wheel_invisible">
    <kp>1000.0</kp>
    <kd>1000.0</kd>
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
  </gazebo>
  <gazebo reference="caster_wheel">
    <kp>1000.0</kp>
    <kd>1000.0</kd>
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
  </gazebo>
  <gazebo reference="laser_link">
    <sensor name="lidar_sensor" type="ray">
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <visualize>1</visualize>
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples>
            <resolution>1</resolution>
            <min_angle>-1.570796</min_angle>
            <max_angle>1.570796</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.2</min>
          <max>10.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin filename="libgazebo_ros_ray_sensor.so" name="gazebo_ros_laser">
        <topicName>/scan</topicName>
        <frameName>laser_link</frameName>
        <gaussianNoise>0.01</gaussianNoise>
        <output_type>sensor_msgs/LaserScan</output_type>
        <ros>
          <remapping>/gazebo_ros_laser/out:=/scan</remapping>
        </ros>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="lamp_sensor">
    <light name="lamp_sensor/lamp" type="spot">
      <pose>0 0 0.0 0 3.14159 0</pose>
      <attenuation>
        <range>30</range>
        <linear>0.05</linear>
      </attenuation>
      <diffuse>0.5 1 1 1</diffuse>
      <specular>1 1 1 1</specular>
      <spot>
        <inner_angle>0.3</inner_angle>
        <outer_angle>0.35</outer_angle>
        <falloff>1</falloff>
      </spot>
      <direction>0 0 -1</direction>
    </light>
    <plugin filename="libLedPlugin.so" name="light_control1">
      <enable>true</enable>
      <light>
        <id>lamp_sensor/lamp</id>
        <duration>0.5</duration>
        <interval>0.5</interval>
        <enable>true</enable>
      </light>
    </plugin>
    <selfCollide>false</selfCollide>
  </gazebo>
  <gazebo reference="chassis_link">
    <material>Gazebo/Black</material>
  </gazebo>
  <!-- Marcador frontal (lado positivo X) -->
  <gazebo reference="chassis_link">
    <material back="Gazebo/Black" bottom="Gazebo/Black" front="Gazebo/Red" left="Gazebo/Black" right="Gazebo/Black" top="Gazebo/Black"/>
  </gazebo>
  <gazebo reference="left_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="right_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="caster_wheel">
    <material>Gazebo/Black </material>
  </gazebo>
  <link name="laser_link">
    <visual name="lamp">
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
      <material name="black">
        <color rgba="0.0 0.0 0.0 1.0"/>
        <!-- Color madera -->
      </material>
    </visual>
    <inertial>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <mass value="0.3"/>
      <inertia ixx="0.000125" ixy="0.0" ixz="0.0" iyy="0.000125" iyz="0.0" izz="0.000125"/>
    </inertial>
    <collision>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="base_lidar_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="0.03 0.00 0.10"/>
    <parent link="chassis_link"/>
    <child link="laser_link"/>
  </joint>
  <link name="lamp_sensor">
    <visual name="lamp">
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
      <material name="black">
        <color rgba="0.0 0.0 0.0 1.0"/>
        <!-- Color madera -->
      </material>
    </visual>
    <inertial>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <mass value="0.3"/>
      <inertia ixx="0.000125" ixy="0.0" ixz="0.0" iyy="0.000125" iyz="0.0" izz="0.000125"/>
    </inertial>
    <collision>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="base_lidar_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="0.03 0.00 0.80"/>
    <parent link="chassis_link"/>
    <child link="lamp_sensor"/>
  </joint>
</robot>
<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from uvrobot.urdf.xacro             | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="uvrobot">
  <!-- Incluir archivos XACRO -->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/properties.xacro"/-->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/inertial.xacro"/-->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <material name="steel">
    <color rgba="0.70 0.70 0.70 1.0"/>
  </material>
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Colores -->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/ros2_control.xacro"/.-->
  <!-- Base footprint (punto de referencia) -->
  <link name="base_footprint"/>
  <!-- Link del chasis cilíndrico -->
  <link name="chassis_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.15" radius="0.15"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.15" radius="0.15"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="4.0"/>
      <inertia ixx="0.03" ixy="0.0" ixz="0.0" iyy="0.03" iyz="0.0" izz="0.045"/>
    </inertial>
  </link>
  <!-- Joint entre base_footprint y chasis -->
  <joint name="base_chassis_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="chassis_link"/>
    <!--origin xyz="0 0 0.095" rpy="0 0 0"/-->
    <origin rpy="0 0 0" xyz="0 0 0.075"/>
  </joint>
  <link name="left_wheel">
    <visual>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.00037916666666666676" ixy="0.0" ixz="0.0" iyy="0.00037916666666666676" iyz="0.0" izz="0.0006250000000000001"/>
    </inertial>
  </link>
  <joint name="left_wheel_joint" type="continuous">
    <parent link="chassis_link"/>
    <child link="left_wheel"/>
    <!--origin xyz="-0.05 ${reflect * (wheel_separation/2)} ${wheel_z_offset}" rpy="0 0 0"/-->
    <origin rpy="0 0 0" xyz="-0.00 0.125 -0.08"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="right_wheel">
    <visual>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.00037916666666666676" ixy="0.0" ixz="0.0" iyy="0.00037916666666666676" iyz="0.0" izz="0.0006250000000000001"/>
    </inertial>
  </link>
  <joint name="right_wheel_joint" type="continuous">
    <parent link="chassis_link"/>
    <child link="right_wheel"/>
    <!--origin xyz="-0.05 ${reflect * (wheel_separation/2)} ${wheel_z_offset}" rpy="0 0 0"/-->
    <origin rpy="0 0 0" xyz="-0.00 -0.125 -0.08"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="caster_wheel">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.037"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.037"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="5.4760000000000004e-05" ixy="0.0" ixz="0.0" iyy="5.4760000000000004e-05" iyz="0.0" izz="5.4760000000000004e-05"/>
    </inertial>
  </link>
  <joint name="caster_joint" type="fixed">
    <parent link="chassis_link"/>
    <child link="caster_wheel"/>
    <origin rpy="0 0 0" xyz="0.12 0 -0.095"/>
  </joint>
  <link name="caster_wheel_invisible">
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.037"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="5.4760000000000004e-05" ixy="0.0" ixz="0.0" iyy="5.4760000000000004e-05" iyz="0.0" izz="5.4760000000000004e-05"/>
    </inertial>
  </link>
  <joint name="caster_joint_invisible" type="fixed">
    <parent link="chassis_link"/>
    <child link="caster_wheel_invisible"/>
    <origin rpy="0 0 0" xyz="-0.12 0 -0.095"/>
  </joint>
  <!-- Ros2 control -->
  <ros2_control name="GaseboSystem" type="system">
    <hardware>
      <plugin>gazebo_ros2_control/GazeboSystem</plugin>
      <!--plugin>uvrobot_hardware/UVRobotHardware</plugin-->
    </hardware>
    <joint name="left_wheel_joint">
      <command_interface name="velocity">
        <param name="min">-10</param>
        <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="right_wheel_joint">
      <command_interface name="velocity">
        <param name="min">-10</param>
        <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
  </ros2_control>
  <!-- Plugin ros2 control gazebo -->
  <gazebo>
    <plugin filename="libgazebo_ros2_control.so" name="gazebo_ros2_control">
      <parameters>/home/oem/uvrobot_ws/install/uvrobot_control/share/uvrobot_control/config/diff_drive_controller.yaml</parameters>
      <ros>
        <remapping>uvrobot_diff_base_controller/cmd_vel_unstamped:=cmd_vel</remapping>
        <remapping>uvrobot_diff_base_controller/odom:=odom</remapping>
        <remapping>/tf:=tf</remapping>
      </ros>
    </plugin>
  </gazebo>
  <!-- Friction -->
  <gazebo reference="caster_joint_invisible">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="caster_wheel_invisible">
    <kp>1000.0</kp>
    <kd>1000.0</kd>
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
  </gazebo>
  <gazebo reference="caster_wheel">
    <kp>1000.0</kp>
    <kd>1000.0</kd>
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
  </gazebo>
  <gazebo reference="laser_link">
    <sensor name="lidar_sensor" type="ray">
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <visualize>1</visualize>
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples>
            <resolution>1</resolution>
            <min_angle>-1.570796</min_angle>
            <max_angle>1.570796</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.2</min>
          <max>10.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin filename="libgazebo_ros_ray_sensor.so" name="gazebo_ros_laser">
        <topicName>/scan</topicName>
        <frameName>laser_link</frameName>
        <gaussianNoise>0.01</gaussianNoise>
        <output_type>sensor_msgs/LaserScan</output_type>
        <ros>
          <remapping>/gazebo_ros_laser/out:=/scan</remapping>
        </ros>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="lamp_sensor">
    <light name="lamp_sensor/lamp" type="spot">
      <pose>0 0 0.0 0 3.14159 0</pose>
      <attenuation>
        <range>30</range>
        <linear>0.05</linear>
      </attenuation>
      <diffuse>0.5 1 1 1</diffuse>
      <specular>1 1 1 1</specular>
      <spot>
        <inner_angle>0.3</inner_angle>
        <outer_angle>0.35</outer_angle>
        <falloff>1</falloff>
      </spot>
      <direction>0 0 -1</direction>
    </light>
    <plugin filename="libLedPlugin.so" name="light_control1">
      <enable>true</enable>
      <light>
        <id>lamp_sensor/lamp</id>
        <duration>0.5</duration>
        <interval>0.5</interval>
        <enable>true</enable>
      </light>
    </plugin>
    <selfCollide>false</selfCollide>
  </gazebo>
  <gazebo reference="chassis_link">
    <material>Gazebo/Black</material>
  </gazebo>
  <!-- Marcador frontal (lado positivo X) -->
  <gazebo reference="chassis_link">
    <material back="Gazebo/Black" bottom="Gazebo/Black" front="Gazebo/Red" left="Gazebo/Black" right="Gazebo/Black" top="Gazebo/Black"/>
  </gazebo>
  <gazebo reference="left_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="right_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="caster_wheel">
    <material>Gazebo/Black </material>
  </gazebo>
  <link name="laser_link">
    <visual name="lamp">
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
      <material name="black">
        <color rgba="0.0 0.0 0.0 1.0"/>
        <!-- Color madera -->
      </material>
    </visual>
    <inertial>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <mass value="0.3"/>
      <inertia ixx="0.000125" ixy="0.0" ixz="0.0" iyy="0.000125" iyz="0.0" izz="0.000125"/>
    </inertial>
    <collision>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="base_lidar_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="0.03 0.00 0.10"/>
    <parent link="chassis_link"/>
    <child link="laser_link"/>
  </joint>
  <link name="lamp_sensor">
    <visual name="lamp">
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
      <material name="black">
        <color rgba="0.0 0.0 0.0 1.0"/>
        <!-- Color madera -->
      </material>
    </visual>
    <inertial>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <mass value="0.3"/>
      <inertia ixx="0.000125" ixy="0.0" ixz="0.0" iyy="0.000125" iyz="0.0" izz="0.000125"/>
    </inertial>
    <collision>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="base_lidar_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="0.03 0.00 0.80"/>
    <parent link="chassis_link"/>
    <child link="lamp_sensor"/>
  </joint>
</robot>
<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from uvrobot.urdf.xacro             | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="uvrobot">
  <!-- Incluir archivos XACRO -->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/properties.xacro"/-->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/inertial.xacro"/-->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <material name="steel">
    <color rgba="0.70 0.70 0.70 1.0"/>
  </material>
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!-- Posición vertical //-0.08 m posicion bajo el chasis -->
  <!-- Posición vertical -->
  <!--xacro:include filename="$(find kalman_description)/urdf/xacro/ros2_control.xacro"/.-->
  <!-- Base footprint (punto de referencia) -->
  <link name="base_footprint"/>
  <!-- Link del chasis cilíndrico -->
  <link name="chassis_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <!--geometry>
                    <cylinder radius="0.15" length="${chassis_altura}"/>
                </geometry-->
      <geometry>
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/chassis.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="steel"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/chassis_outline.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="4.0"/>
      <inertia ixx="0.03" ixy="0.0" ixz="0.0" iyy="0.03" iyz="0.0" izz="0.045"/>
    </inertial>
  </link>
  <!-- Joint entre base_footprint y chasis -->
  <joint name="base_chassis_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="chassis_link"/>
    <!--origin xyz="0 0 0.095" rpy="0 0 0"/-->
    <origin rpy="0 0 -1.5707963267948966" xyz="0 0 0.3"/>
  </joint>
  <link name="tubos_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/tubos.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- Alternativa más simple para colisión si es posible -->
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/tubos.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="4.0"/>
      <inertia ixx="0.03" ixy="0.0" ixz="0.0" iyy="0.03" iyz="0.0" izz="0.045"/>
    </inertial>
  </link>
  <joint name="base_tubos_joint" type="fixed">
    <parent link="chassis_link"/>
    <child link="tubos_link"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <link name="prisma_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/prisma.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- Alternativa más simple para colisión si es posible -->
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/prisma_outline.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="4.0"/>
      <inertia ixx="0.03" ixy="0.0" ixz="0.0" iyy="0.03" iyz="0.0" izz="0.045"/>
    </inertial>
  </link>
  <joint name="base_prisma_joint" type="fixed">
    <parent link="chassis_link"/>
    <child link="prisma_link"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <link name="left_wheel">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <!--geometry>
                    <cylinder radius="${wheel_radius}" length="${wheel_width}"/>
                </geometry-->
      <geometry>
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/rueda.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.0325"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.00019869791666666668" ixy="0.0" ixz="0.0" iyy="0.00019869791666666668" iyz="0.0" izz="0.00026406250000000003"/>
    </inertial>
  </link>
  <joint name="left_wheel_joint" type="continuous">
    <parent link="chassis_link"/>
    <child link="left_wheel"/>
    <origin rpy="0 0 0" xyz="-0.125609 0.0 -0.24625"/>
    <!--origin xyz="0.0 0.0 0.0" rpy="0 0 0"/-->
    <axis xyz="-1 0 0"/>
  </joint>
  <link name="right_wheel">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <!--geometry>
                    <cylinder radius="${wheel_radius}" length="${wheel_width}"/>
                </geometry-->
      <geometry>
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/rueda.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.0325"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.00019869791666666668" ixy="0.0" ixz="0.0" iyy="0.00019869791666666668" iyz="0.0" izz="0.00026406250000000003"/>
    </inertial>
  </link>
  <joint name="right_wheel_joint" type="continuous">
    <parent link="chassis_link"/>
    <child link="right_wheel"/>
    <origin rpy="0 0 0" xyz="0.125609 0.0 -0.24625"/>
    <!--origin xyz="0.0 0.0 0.0" rpy="0 0 0"/-->
    <axis xyz="-1 0 0"/>
  </joint>
  <link name="caster_wheel_1">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/caster_wheel_outline.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/caster_wheel_outline.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="5.4760000000000004e-05" ixy="0.0" ixz="0.0" iyy="5.4760000000000004e-05" iyz="0.0" izz="5.4760000000000004e-05"/>
    </inertial>
  </link>
  <joint name="caster_joint_1" type="fixed">
    <parent link="chassis_link"/>
    <child link="caster_wheel_1"/>
    <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
    <!--origin xyz="0.0 0.0 0.0" rpy="0 0 0"/-->
  </joint>
  <!--link name="caster_wheel_invisible">
            <collision>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <geometry>
                    <sphere radius="${caster_radius}"/>
                </geometry>
            </collision>
            <xacro:inertial_sphere 
                mass="${caster_mass}" 
                radius="${caster_radius}">
                <origin xyz="0 0 0" rpy="0 0 0"/>
            </xacro:inertial_sphere>
        </link>
        <joint name="caster_joint_invisible" type="fixed">
            <parent link="chassis_link"/>
            <child link="caster_wheel_invisible"/>
            <origin xyz="-${caster_x} 0 ${caster_z}" rpy="0 0 0"/>
        </joint-->
  <link name="caster_wheel_2">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/caster_wheel_outline.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/caster_wheel_outline.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="5.4760000000000004e-05" ixy="0.0" ixz="0.0" iyy="5.4760000000000004e-05" iyz="0.0" izz="5.4760000000000004e-05"/>
    </inertial>
  </link>
  <joint name="caster_joint_2" type="fixed">
    <parent link="chassis_link"/>
    <child link="caster_wheel_2"/>
    <origin rpy="0 0 0" xyz="-0.2 0.0 0.0"/>
    <!--origin xyz="0.0 0.0 0.0" rpy="0 0 0"/-->
  </joint>
  <!--link name="caster_wheel_invisible">
            <collision>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <geometry>
                    <sphere radius="${caster_radius}"/>
                </geometry>
            </collision>
            <xacro:inertial_sphere 
                mass="${caster_mass}" 
                radius="${caster_radius}">
                <origin xyz="0 0 0" rpy="0 0 0"/>
            </xacro:inertial_sphere>
        </link>
        <joint name="caster_joint_invisible" type="fixed">
            <parent link="chassis_link"/>
            <child link="caster_wheel_invisible"/>
            <origin xyz="-${caster_x} 0 ${caster_z}" rpy="0 0 0"/>
        </joint-->
  <!-- Ros2 control -->
  <ros2_control name="GaseboSystem" type="system">
    <hardware>
      <plugin>gazebo_ros2_control/GazeboSystem</plugin>
      <!--plugin>uvrobot_hardware/UVRobotHardware</plugin-->
    </hardware>
    <joint name="left_wheel_joint">
      <command_interface name="velocity">
        <param name="min">-10</param>
        <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="right_wheel_joint">
      <command_interface name="velocity">
        <param name="min">-10</param>
        <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
  </ros2_control>
  <!-- Plugin ros2 control gazebo -->
  <gazebo>
    <plugin filename="libgazebo_ros2_control.so" name="gazebo_ros2_control">
      <parameters>/home/oem/uvrobot_ws/install/uvrobot_control/share/uvrobot_control/config/diff_drive_controller.yaml</parameters>
      <ros>
        <remapping>uvrobot_diff_base_controller/cmd_vel_unstamped:=cmd_vel</remapping>
        <remapping>uvrobot_diff_base_controller/odom:=odom</remapping>
        <remapping>/tf:=tf</remapping>
      </ros>
    </plugin>
  </gazebo>
  <!-- Friction -->
  <gazebo reference="caster_joint_invisible">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="caster_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="base_lamp_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="caster_wheel_invisible">
    <kp>1000.0</kp>
    <kd>1000.0</kd>
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
    <min_depth>0.005</min_depth>
  </gazebo>
  <gazebo reference="caster_wheel">
    <kp>100000.0</kp>
    <kd>100000.0</kd>
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
  </gazebo>
  <gazebo reference="left_wheel">
    <kp>1000.0</kp>
    <kd>1000.0</kd>
    <mu1>10.0</mu1>
    <mu2>1.0</mu2>
    <min_depth>0.001</min_depth>
  </gazebo>
  <gazebo reference="right_wheel">
    <kp>1000.0</kp>
    <kd>1000.0</kd>
    <mu1>10.0</mu1>
    <mu2>1.0</mu2>
    <min_depth>0.001</min_depth>
  </gazebo>
  <gazebo reference="laser_link">
    <sensor name="lidar_sensor" type="ray">
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <visualize>0</visualize>
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples>
            <resolution>1</resolution>
            <min_angle>-3.141592653589793</min_angle>
            <max_angle>3.141592653589793</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.05</min>
          <max>10.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin filename="libgazebo_ros_ray_sensor.so" name="gazebo_ros_laser">
        <topicName>/scan</topicName>
        <frameName>laser_link</frameName>
        <gaussianNoise>0.01</gaussianNoise>
        <output_type>sensor_msgs/LaserScan</output_type>
        <ros>
          <remapping>/gazebo_ros_laser/out:=/scan</remapping>
        </ros>
      </plugin>
    </sensor>
  </gazebo>
  <!-- Marcador frontal (lado positivo X) -->
  <gazebo reference="chassis_link">
    <material>Gazebo/DarkGrey</material>
  </gazebo>
  <gazebo reference="prisma_link">
    <material>Gazebo/GreyTransparent</material>
  </gazebo>
  <gazebo reference="caster_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="base_lidar_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="caster_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="left_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="right_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="laser_link">
    <material>Gazebo/Black</material>
  </gazebo>
  <link name="laser_link">
    <visual>
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <!--box size="${lidar_largo} ${lidar_ancho} ${lidar_altura}"/-->
        <mesh filename="file:///home/oem/uvrobot_ws/install/kalman_description/share/kalman_description/meshes/lidar.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black">
        <color rgba="0.0 0.0 0.0 1.0"/>
        <!-- Color madera -->
      </material>
    </visual>
    <inertial>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <mass value="0.3"/>
      <inertia ixx="0.000125" ixy="0.0" ixz="0.0" iyy="0.000125" iyz="0.0" izz="0.000125"/>
    </inertial>
    <collision>
      <origin rpy="0.0 0.0 0.0" xyz="0.01 0.0 0.0015"/>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="base_lidar_joint" type="fixed">
    <origin rpy="0.0 0.0 1.5707963267948966" xyz="0.0 0.059146 -0.1035"/>
    <parent link="chassis_link"/>
    <child link="laser_link"/>
  </joint>
  <gazebo>
    <model name="light_model_1">
      <static>0</static>
      <pose>0.1 0.12 0.4 0 0 0</pose>
      <link name="light_link_1">
        <visual name="light_source">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <cylinder>
              <radius>0.008</radius>
              <length>0.34</length>
            </cylinder>
          </geometry>
          <material>
            <ambient>0.2 0.0 0.4 1</ambient>
            <!-- Oscuro para evitar brillo ambiental -->
            <diffuse>0.3 0.0 0.6 1</diffuse>
            <!-- Color base suave -->
            <specular>0.1 0.0 0.3 1</specular>
            <!-- Brillo mínimo -->
            <emissive>0.4 0.0 0.8 1</emissive>
            <!-- Emisión tenue (solo un toque de luz) -->
            <!-- Emisión muy brillante (dominante) -->
          </material>
        </visual>
        <collision name="light_collision">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <cylinder>
              <radius>0.008</radius>
              <length>0.34</length>
            </cylinder>
          </geometry>
        </collision>
        <light name="light_source" type="spot">
          <pose>0 0.0 0.0 1.57 0 -0.7853981633974483</pose>
          <light_on>1</light_on>
          <diffuse>0.5 0.0 1.0 1</diffuse>
          <!-- Violeta-azulado -->
          <intensity>3.0</intensity>
          <specular>0.3 0.0 0.5 1</specular>
          <attenuation>
            <range>10</range>
            <!-- Corto alcance (como luz UV real) -->
            <linear>0.2</linear>
          </attenuation>
          <size>2 1</size>
          <spot>
            <inner_angle>1.57</inner_angle>
            <outer_angle>2.00</outer_angle>
            <falloff>0.5</falloff>
          </spot>
          <axes>
            <visible>false</visible>
          </axes>
        </light>
        <inertial>
          <pose>0 0 0 0 -0 0</pose>
          <mass>0.005</mass>
          <inertia>
            <ixx>0.00000379167</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.000379167</iyy>
            <iyz>0</iyz>
            <izz>0.00000625</izz>
          </inertia>
        </inertial>
      </link>
      <!--plugin name='light_control_${index}' filename='libLedPlugin.so'>
                    <enable>true</enable>
                    <light>
                        <id>light_link_${index}/light_source</id>
                        <enable>true</enable>
                        <duration>1</duration>
                        <interval>0.5</interval>
                        <color>1 0 0</color>
                        <attenuation>
                            <range>20</range>
                            <linear>0.10</linear>
                        </attenuation>
                    </light>
                </plugin-->
      <joint name="light_joint_1" type="fixed">
        <parent>base_footprint</parent>
        <child>light_link_1</child>
        <pose>0 0 0.0 0 0 0</pose>
      </joint>
    </model>
  </gazebo>
  <gazebo>
    <model name="light_model_2">
      <static>0</static>
      <pose>0.1 -0.12 0.4 0 0 0</pose>
      <link name="light_link_2">
        <visual name="light_source">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <cylinder>
              <radius>0.008</radius>
              <length>0.34</length>
            </cylinder>
          </geometry>
          <material>
            <ambient>0.2 0.0 0.4 1</ambient>
            <!-- Oscuro para evitar brillo ambiental -->
            <diffuse>0.3 0.0 0.6 1</diffuse>
            <!-- Color base suave -->
            <specular>0.1 0.0 0.3 1</specular>
            <!-- Brillo mínimo -->
            <emissive>0.4 0.0 0.8 1</emissive>
            <!-- Emisión tenue (solo un toque de luz) -->
            <!-- Emisión muy brillante (dominante) -->
          </material>
        </visual>
        <collision name="light_collision">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <cylinder>
              <radius>0.008</radius>
              <length>0.34</length>
            </cylinder>
          </geometry>
        </collision>
        <light name="light_source" type="spot">
          <pose>0 0.0 0.0 1.57 0 -2.356194490192345</pose>
          <light_on>1</light_on>
          <diffuse>0.5 0.0 1.0 1</diffuse>
          <!-- Violeta-azulado -->
          <intensity>3.0</intensity>
          <specular>0.3 0.0 0.5 1</specular>
          <attenuation>
            <range>10</range>
            <!-- Corto alcance (como luz UV real) -->
            <linear>0.2</linear>
          </attenuation>
          <size>2 1</size>
          <spot>
            <inner_angle>1.57</inner_angle>
            <outer_angle>2.00</outer_angle>
            <falloff>0.5</falloff>
          </spot>
          <axes>
            <visible>false</visible>
          </axes>
        </light>
        <inertial>
          <pose>0 0 0 0 -0 0</pose>
          <mass>0.005</mass>
          <inertia>
            <ixx>0.00000379167</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.000379167</iyy>
            <iyz>0</iyz>
            <izz>0.00000625</izz>
          </inertia>
        </inertial>
      </link>
      <!--plugin name='light_control_${index}' filename='libLedPlugin.so'>
                    <enable>true</enable>
                    <light>
                        <id>light_link_${index}/light_source</id>
                        <enable>true</enable>
                        <duration>1</duration>
                        <interval>0.5</interval>
                        <color>1 0 0</color>
                        <attenuation>
                            <range>20</range>
                            <linear>0.10</linear>
                        </attenuation>
                    </light>
                </plugin-->
      <joint name="light_joint_2" type="fixed">
        <parent>base_footprint</parent>
        <child>light_link_2</child>
        <pose>0 0 0.0 0 0 0</pose>
      </joint>
    </model>
  </gazebo>
  <gazebo>
    <model name="light_model_3">
      <static>0</static>
      <pose>-0.14 0  0.4 0 0 0</pose>
      <link name="light_link_3">
        <visual name="light_source">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <cylinder>
              <radius>0.008</radius>
              <length>0.34</length>
            </cylinder>
          </geometry>
          <material>
            <ambient>0.2 0.0 0.4 1</ambient>
            <!-- Oscuro para evitar brillo ambiental -->
            <diffuse>0.3 0.0 0.6 1</diffuse>
            <!-- Color base suave -->
            <specular>0.1 0.0 0.3 1</specular>
            <!-- Brillo mínimo -->
            <emissive>0.4 0.0 0.8 1</emissive>
            <!-- Emisión tenue (solo un toque de luz) -->
            <!-- Emisión muy brillante (dominante) -->
          </material>
        </visual>
        <collision name="light_collision">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <cylinder>
              <radius>0.008</radius>
              <length>0.34</length>
            </cylinder>
          </geometry>
        </collision>
        <light name="light_source" type="spot">
          <pose>0 0.0 0.0 1.57 0 1.5707963267948966</pose>
          <light_on>1</light_on>
          <diffuse>0.5 0.0 1.0 1</diffuse>
          <!-- Violeta-azulado -->
          <intensity>3.0</intensity>
          <specular>0.3 0.0 0.5 1</specular>
          <attenuation>
            <range>10</range>
            <!-- Corto alcance (como luz UV real) -->
            <linear>0.2</linear>
          </attenuation>
          <size>2 1</size>
          <spot>
            <inner_angle>1.57</inner_angle>
            <outer_angle>2.00</outer_angle>
            <falloff>0.5</falloff>
          </spot>
          <axes>
            <visible>false</visible>
          </axes>
        </light>
        <inertial>
          <pose>0 0 0 0 -0 0</pose>
          <mass>0.005</mass>
          <inertia>
            <ixx>0.00000379167</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.000379167</iyy>
            <iyz>0</iyz>
            <izz>0.00000625</izz>
          </inertia>
        </inertial>
      </link>
      <!--plugin name='light_control_${index}' filename='libLedPlugin.so'>
                    <enable>true</enable>
                    <light>
                        <id>light_link_${index}/light_source</id>
                        <enable>true</enable>
                        <duration>1</duration>
                        <interval>0.5</interval>
                        <color>1 0 0</color>
                        <attenuation>
                            <range>20</range>
                            <linear>0.10</linear>
                        </attenuation>
                    </light>
                </plugin-->
      <joint name="light_joint_3" type="fixed">
        <parent>base_footprint</parent>
        <child>light_link_3</child>
        <pose>0 0 0.0 0 0 0</pose>
      </joint>
    </model>
  </gazebo>
  <!--xacro:gazebo_lamp index="4">
            <pose>-${lamp_x} -${lamp_y} ${lamp_z} 0 0 0</pose>
        </xacro:gazebo_lamp-->
</robot>
